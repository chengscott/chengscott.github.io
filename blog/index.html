<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<title>Blog</title>

	<link rel="stylesheet" href="//oss.maxcdn.com/semantic-ui/2.1.8/semantic.min.css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="//oss.maxcdn.com/semantic-ui/2.1.8/semantic.min.js"></script>
	<script>
		function list(url, path, parent) {
			$.getJSON(url, function(data) {
				data = data.tree;
				$.each(data, function(index, datum) {
					var nextId = parent + '-' + datum.path;
					if (datum.type == 'tree') {
						var res = '<div class="item">'
						+ '<i class="folder icon"></i>'
						+ '<div class="content">'
						+ '<div class="header">' + datum.path + '</div>'
						+ '<div class="ui list" id="' + nextId + '"></div>'
						+ '</div></div>';
						$('#' + parent).html($('#' + parent).html() + res);
						list(datum.url, path + '/' + datum.path, nextId);
					} else {
						var name = datum.path.slice(0, datum.path.lastIndexOf('.'));
						var res = '<div class="item">'
						+ '<i class="file icon"></i>'
						+ '<div class="content">'
						+ '<div class="header">'
						+ '<a href="?p=' + path + '/' + name + '">' + name + '</a></div>'
						+ '</div></div>';
						$('#' + parent).html($('#' + parent).html() + res);
					}
				});
			});
		}

		function getParameterByName(name) {
		    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
		    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
		        results = regex.exec(location.search);
		    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}

		$(function() {
			$('.masthead').visibility({
				once: false,
				onBottomPassed: function() {
					$('.fixed.menu').transition('fade in');
				},
				onBottomPassedReverse: function() {
					$('.fixed.menu').transition('fade out');
				}

			});
	        // create sidebar and attach to menu open
	        $('.ui.sidebar').sidebar('attach events', '.toc.item');
	        // article
	        var p = getParameterByName('p');
	        if (p == '') p = 'blog';
    	    $('#article').load(p + '.html', function(responseText, statusText, xhr) {
    	    	if (statusText == 'error') {
    	    		$('#article').load('error.html');
    	    	}
    	    });
    	    // folder
    	    $.getJSON('https://api.github.com/repos/chengscott/chengscott.github.io/git/refs/heads/master', function(ret) {
    	    	$.getJSON('https://api.github.com/repos/chengscott/chengscott.github.io/git/trees/' + ret.object.sha, function(ret) {
    	    		var blogUrl;
    	    		ret = ret.tree;
    	    		$.each(ret, function(index, data) {
    	    			if (data.path == 'blog') {
    	    				blogUrl = data.url;
    	    				return;
    	    			}
    	    		});
	    	    	$.getJSON(blogUrl, function(ret) {
	    	    		var articleUrl;
	    	    		ret = ret.tree;
	    	    		$.each(ret, function(index, data) {
	    	    			if (data.path == 'article') {
	    	    				articleUrl = data.url;
	    	    				return;
	    	    			}
	    	    		});
	    	    		list(articleUrl, 'article', 'folderTree');
	    	    	});
	    	    });
    	    });
	    });
	</script>
	<style>
		.hidden.menu {
			display: none;
		}
		.masthead.segment {
			min-height: 70px;
			padding: 1em 0em;
		}
		.masthead .logo.item img {
			margin-right: 1em;
		}
		.masthead h1.ui.header {
			margin-top: 3em;
			margin-bottom: 0em;
			font-size: 4em;
			font-weight: normal;
		}
		.masthead h2 {
			font-size: 1.7em;
			font-weight: normal;
		}
		.ui.vertical.stripe {
			padding: 4em 0em;
		}
		.ui.vertical.stripe h3 {
			font-size: 2em;
		}
		.ui.vertical.stripe .button + h3,
		.ui.vertical.stripe p + h3 {
			margin-top: 1em;
		}
		.ui.vertical.stripe p {
			font-size: 1.33em;
		}
		.ui.vertical.stripe .horizontal.divider {
			margin: 3em 0em;
		}
		.quote.stripe.segment {
			padding: 0em;
		}
		.quote.stripe.segment .grid .column {
			padding-top: 5em;
			padding-bottom: 5em;
		}
		.footer.segment {
			padding: 5em 0em;
		}
		.secondary.pointing.menu .toc.item {
			display: none;
		}
		@media screen and (min-height: 460px) {
			.ui.footer {
				position: absolute;
				bottom: 0;
				height: 230px;
				width: 100%;
			}
		}
		@media only screen and (max-width: 700px) {
			.ui.fixed.menu {
				display: none !important;
			}
			.secondary.pointing.menu .item,
			.secondary.pointing.menu .menu {
				display: none;
			}
			.secondary.pointing.menu .toc.item {
				display: block;
			}
			.masthead.segment {
				min-height: 35px;
			}
			.masthead h1.ui.header {
				font-size: 2em;
				margin-top: 1.5em;
			}
			.masthead h2 {
				margin-top: 0.5em;
				font-size: 1.5em;
			}
		}
	</style>
</head>
<body>	
	<!-- Following Menu -->
	<div class="ui large top fixed hidden menu">
		<div class="ui container">
			<a class="item" href="..">Home</a>
			<a class="active item" href="../blog/">Blog</a>
			<a class="item" href="../project/">Project</a>
			<a class="item" href="../talk/">Talk</a>
		</div>
	</div>

	<!-- Sidebar Menu -->
	<div class="ui vertical sidebar menu">
		<a class="item" href="..">Home</a>
		<a class="active item" href="../blog/">Blog</a>
		<a class="item" href="../project/">Project</a>
		<a class="item" href="../talk/">Talk</a>
	</div>

	<!-- Page Contents -->
	<div class="pusher">
		<div class="ui vertical masthead center aligned segment" style="border-bottom: none;">
			<div class="ui container">
				<div class="ui large secondary pointing menu">
					<a class="toc item">
						<i class="sidebar icon"></i>
					</a>
					<a class="item" href="..">Home</a>
					<a class="active item" href="../blog/">Blog</a>
					<a class="item" href="../project/">Project</a>
					<a class="item" href="../talk/">Talk</a>
				</div>
			</div>
		</div>
		
		<div class="ui grid" style="padding-bottom: 230px;">
			<div class="two column grid"></div>
			<div class="two column grid"><br><div class="ui list" id="folderTree"></div></div>
			<div class="twelve wide column" id="article"></div>
		</div>

		<div class="ui inverted vertical footer segment">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height stackable grid">
					<div class="three wide column">
						<h4 class="ui inverted header">About me</h4>
						<div class="ui inverted link list">
							<a href="//www.facebook.com/chengcos" target="_blank" class="item">My Facebook</a>
							<a href="//github.com/chengscott" target="_blank" class="item">My Github</a>
							<a href="//codestreams.blogspot.tw/" target="_blank" class="item">Codestreams</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Organizations</h4>
						<div class="ui inverted link list">
							<a href="//www.facebook.com/nthusa/" target="_blank" class="item">NTHUSA</a>
							<a href="//pcshjq.github.io/" target="_blank" class="item">PCSHJQ</a>
							<a href="//github.com/pcshic" target="_blank" class="item">PCSHIC</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Site</h4>
						<div class="ui inverted link list">
							<a href="sitemap/" class="item">Sitemap</a>
							<a href="//docs.google.com/forms/d/1M2ymSxmWBVXciuhpzWA6m2oDH2Qdjsj60djTTupKaOo/viewform" target="_blank" class="item">Error Report</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>